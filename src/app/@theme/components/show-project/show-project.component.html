<div class="col-xl-9 col-md-8">
  <div class="settings-widget profile-details">
    <div class="settings-menu p-0">
      <div class="profile-heading">
        <h3 class="why-title">
          Project Name is:
          <h3 style="color: blue;">{{ projectDetails?.nameProject || 'Loading...' }}</h3>
        </h3>
        <p>Project owned By: {{ projectDetails?.projectOwner || 'Loading...' }}</p>
      </div>
      <div class="address-check-widget common-space">
        <div class="check-bill-address">
          <!-- Display loading indicator -->
          <div *ngIf="isLoading" class="text-info">
            Loading project details...
          </div>

          <!-- Display project details if not loading and projectDetails is defined -->
          <ng-container *ngIf="!isLoading && projectDetails">
            <div class="edit-new-address wallet-method wallet-radio-blk d-flex align-items-center">
              <label class="radio-inline custom_radio me-4">
                <input type="radio" name="optradio" checked>
                <span class="checkmark"></span> Created At: {{ projectDetails.createdDate | date }}
              </label>
              <div class="address-edits">
                <a href="javascript:void(0);" class="edit-btn-blk"><i class="feather-edit"></i></a>
              </div>
            </div>
            <div class="edit-new-address wallet-method wallet-radio-blk d-flex align-items-center">
              <label class="radio-inline custom_radio me-4">
                <span class="checkmark" style="background-color: red;"></span> Deadline: {{ projectDetails.deadline | date }}
              </label>
              <div class="address-edits">
                <a href="javascript:void(0);" class="edit-btn-blk"><i class="feather-edit"></i></a>
              </div>
            </div>
          </ng-container>

          <h6 class="robotic-font">Estimated time: {{ projectDetails?.estimatedTime || 'Loading...' }}</h6>
          <a [routerLink]="['/pages/lean/smed/task', projectDetails?.idProject]" routerLinkActive="router-link-active">
            <button class="create-project-btn">New Task</button>
          </a>

          <!-- Handle case where projectDetails is null or undefined -->
          <div *ngIf="!isLoading && !projectDetails" class="text-danger">
            Project details not found.
          </div>
        </div>

        <!-- Display tasks in a table -->
        <table class="table table-nowrap mb-0" *ngIf="!isLoading && tasks.length">
          <thead>
            <tr>
              <th>Task Name</th>
              <th>Manager</th>
              <th>Created Date</th>
              <th>Deadline</th>
              <th>Task Type</th>
              <th>Actions</th>
              <th>&nbsp;</th>
              <th>&nbsp;</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of tasks">
              <td>{{ task.taskName }}</td>
              <td>{{ task.manager }}</td>
              <td><span class="badge info-low">{{ task.createdDate | date }}</span></td>
              <td>{{ task.deadline | date }}</td>
              <td>{{ task.taskType }}</td>
              <td>

                  <span class="mdi--show"></span>

              </td>
              <td>
                <span class="lucide--edit" ></span>
              </td>
              <td>
                <button (click)="confirmDelete(task.idTask)" class="delete-button">
                  <span class="material-symbols--delete-outline"></span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Handle case where no tasks are available -->
        <div *ngIf="!isLoading && tasks.length === 0" class="text-info">
          No tasks available for this project.
        </div>
      </div>
    </div>
  </div>
</div>
